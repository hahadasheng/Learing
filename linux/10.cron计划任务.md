# cron(crontab)计划任务
> 在指定时间点去执行相关任务！

## 一、语法格式：
- `crontab -选项 [选项指定值] [-选项 [选项指定值]]`
    - **`-l`**: list,列出指定用户的计划任务列表
    - **`-e`**: edit,编辑指定用户的计划任务列表
    - *-u: 指定的用户名，如果不指定，表示当前用户*
    - *-r: 删除指定用户的计划任务列表*

## 二、计划任务编辑规则
> **计划任务的规则语法格式**：以行为单位，一行为一个计划：
```
分 时 日 月 周 要执行的命令
分 时 日 月 周 要执行的命令
...
```

1. 如果想每天0点0分执行reboot执行，则可以写成(*表示所有)
    1. `crontab -e`
    2. `0 0 * * * reboot`
    3. `Esc :wq!`

### 1. 取值范围
1. 分：0~59
2. 时：0~23
3. 日：1~31
4. 月：1~12
5. 周：0~6,0表示星期天（7也表示星期天）

### 2. 相关符号
1. `*`: 取值范围中的每一个数字
1. `-`: 连续区间表达式:
    - 1到7可以写成`1-7`
2. `/`: 步长，每多少个
    - 例如想没10分钟一次，可以在分的位置写上 `*/10`
3. `,`: 表示多个取值，
    - 想在1,2,6点执行，可以在时的位置写上 `1,2,6`


## 三、案例演示
> `crontab -e`

1. 每月1、10、22日的4:45重启network服务：
    - `45 4 1,10,22 * * service network restart`

2. 每周六、周日的1:10重启network服务
    - `10 1 * * 0,6 service network restart`

3. 每天18:00~23:00之间每隔30分钟重启network服务
    - `*/30 18-23 * * * service network restart`

4. 每隔两天的上午8点到11点的第3和第15分钟执行一次重启
    - `3,15 8-11 */2 * * reboot`

5. 每1分钟往root家目录中的RT.txt中输出信息，
    - `*/1 * * * * ls~>> /root/RT.txt`

补充：查看当前时间：`date +"%F %T"`

## 四、Crontab权限的问题
> 默认任何用户可以创建自己的计划任务;root可以进行配置
1. 配置禁止计划任务功能的文件（黑名单）
**`/etc/cron.deny`**

2. 格式：一行一个用户名即可

3. 白名单，本身不存在【白名单的优先级高于黑名单】
*`/etc/cron.allow`*








