# vim的常见三种模式

【默认】命令模式：该模式下，不能对文件直接编辑，可以以数据款借鉴进行一下操作删除行，复制行，移动光标。粘贴等

编辑模式：对文件的内容进行编辑

末行模式：在末行中输入命令来对文件进行小左搜索，替换，保存，退出，撤销。高亮等等

### 1. vim 打开文件的方式
vim 文件路径 ：打开指定的文件
vim +数字 文件的路径 ：打开指定的文件，并且将光标移动到指定行
vim +/关键词 文件名 ：打开指定的文件，并且高亮显示关键词
vim 文件路径1 文件路径2 ... :同时打开多个文件

重点：先复制出一个cp /etc/passwd ~/文件，复制到家目录

退出方式：按下q, 按下回车

### 2.模式之间的相互切换

@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ vim三种模式切换.png


---
## 一、命令模式

> 打开文件进入的模式

### 1.光标的移动

1. 行首操作：光标移动到行首，某行的第一位
按键：`shift + 6(^)` 正则^

2. 行位操作：光标移动到行尾
按键：`shift + 4($)` 正则$

3. 光标移动到首行
按键：`gg`  (要good game了)

4. 光标移动到末行
按键：`G`

5. 直接翻屏
按键
    向上翻：`ctrl + b` before 或者 `PgUp`
    向下翻: `ctrl + f` after  或者 `PgDn`

### 2.复制操作

配合粘贴一起使用

1. 复制光标所在行
按键：`yy`
在想要粘贴的地方按下 `p` 键

2. **以光标所在行为准，向下复制指定的行数,包含了当前行**
按键：`数字 yy`
先要粘贴的地方按下`p`

3. 可视化的复制
按键 `ctrl + v`
按 上下左右 方向键箭头
按下 `yy`
在粘贴的位置按下 `p`

esc 脱出

### 3.剪切/删除

> 严格意义是剪切，如果不配合粘贴使用就是删除效果

1. 删除/剪切光标所在行
按键`dd` 删除之后下一行上移

2. 剪切/删除光标所在当前行为基准，向下删除/剪切指定的行
按键：`数字 dd` 删除之后下一行上移

3. 剪切/删除光标所在的当前行，但是删除之后下一行不上移
按键： `D` 当前行变成空白行


4. 撤销/恢复 (undo)
撤销按键： `u` 或者 `:u`(非命令模式)
恢复(取消之前撤销的操作)：`ctrl + r`


### 4.拓展

1. 快速将光标移动到指定的行数
按键：`数字 G`

2. 以当前光标为准，向上/下移动指定n行
按键：`数组 对应的上下方向键`

3. 以当前光标为准，向左/右移动指定n个字符
按键：`数组 对应的左右方向键`

4. 【行末模式】下快速移动方式：移动到指定的行
按键: `:数字`

---
## 二、末行模式

- 命令模式->末行模式：按下`:`即可进入(`/`表示查找，只有查找功能)
- 退出方式：
    - 按下`Esc`
    - 连按两次`Esc`
    - 删除末行全部字符

1. 保存操作(write)
按键：`:w 回车`  保存文件
按键：`:w 路径 回车` 另存为

2. 退出
输入：`:q 回车`

3.  保存并退出
按键：`:wq 回车`

4. 强制(!)
按键：`:q!` 强制退出，刚才做的修改操作不做保存
强制保存并退出，按键： `:wq! 回车`

5. 调用外部命令
按键：`:!外部命令`
例如：`:!ls`
当外部命令执行完，按下任意键会回到之前vim模式下

6. 搜索/查找
按键：`/关键词`
在搜索结果中切换上/下一个(next)：`N`/`n`

7. 取消高亮
按键：`:nohl`【no highlight】

8. 替换指令
`%`:表示整个文档
`g`表示当前整行
替换光标所在行的第一处符合条件的匹配：`:s/搜索的关键词/行的内容`
替换光标所在行的所有匹配内容：`:/搜索的关键词/新的内容/g`
全局替换，替换每一行的第一个符合条件的内容：`:%/搜索的关键词/新的内容`
全局替换，替换文本中所有匹配的内容:`:%/搜索的关键词/新的内容/g`

9. 显示行号【临时显示】
输入：`:set nu`
取消显示行号：`:set no nu`

10. 使用vim同时打开多个文件，在**末行模式**下进行切换文件
例如：`vim a.txt b.txt c.txt`
查看当前已经打开的文件名称: `:files`
%a -表示当前正在打开的文件
#： 上一个打开的文件

切换文件的方式
a. 如果需要指定切换文件：`:open b.txt`
可以通过其他命令来切换上一个 `:bp` back previous
下一个文件： `:bn` back next

---
## 二、编辑模式
进入方式：
命令模式->编辑模式
`i`: 在光标所在字符前开始插入
`a`: 在光标所在字符后开始插入

退出方式：按一下: `Esc`

---
## 三、实用功能
1. 代码着色：
    - 打开显示 `:syntax on`
    - 关闭显示 `:syntax off`

2. vim 中的计算器的使用
当在编辑文件时需要计算器计算一些公式
    - 进入编辑模式
    - `ctrl + r`
    - 输入等号
    - 输入需要的内容

---
## 四、扩展内容
### 1.vim的配置

vim是一款编辑器，有配置文件，有三种情况
1. 在文件打开的时候在末行模式下输入的配置(临时的)

2. 个人的配置文件(/.vimrc),如果没有，可以自行新建
    - 可以自行新建`touch .vimrc`并`vim .vmrc`
    - `set nu` 显示行号(再换行写下一个配置)
    - `syntax on` 显示着色
    - ...
> 如果某个配置项，在个人配置文件与全局配置文件产生冲突是以谁为准？【**个人配置优先级高，全局优先级低**】

3. 全局配置文件(vim自带, /etc/vimrc)

### 2.异常退出
> 在编辑文件之后并没有正常的去wq保存退出，而是遇到突然关闭终端或者断点的情况，下次再次打开文件的时候，会显示一些提示信息。
linux会在当前文件夹下生成一个隐藏文件，文件名为 `.原始文件名.swp`

- 解决办法，将交换文件删除掉 `rm -f .原始文件名.swp`

### 3.别名机制【不推荐使用】
> 作用：相当于创建一些属于自己的自定义命令
别名机制依靠的是一个别名**映射**文件
配置文件为 `~/.bashrc`
配置格式为 `alias 别名='原始命令'`
保存并退出
重新登录当前用户即可使用！

### 4. 退出方式
> 之前vim中退出编辑的文件可以使用`:q`或者`:wq`。
1. 【推荐使用】其他命令，保存并退出 ：`:x`，如果文件没有被修改，不会修改更新时间

2. `:X` 大X是对文件进行加密，需要输入密码才能编辑文件

